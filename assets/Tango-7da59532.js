import{c as Q,d as me,i as De,j as be,h as M,k as D,a as z,g as T,t as C,w as we,v as Ye,b as u,F as G,l as ve,o as b,p as he,H as ne,u as H,e as Z,n as je,T as Re,f as Y,x as We,W as Ve,I as Be,J as Je,_ as Ze,B as ee,E as ke,G as Pe,L as qe,M as Xe}from"./index-820047a8.js";import{C as Ge,i as Ke,g as Qe,a as et}from"./index-3ffc7b84.js";const tt=Q("AlarmClockIcon",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M12 9v4l2 2",key:"1c63tq"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"m6 19-2 2",key:"1ek6nb"}],["path",{d:"m18 19 2 2",key:"lw9i"}]]),nt=Q("CheckCircleIcon",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),rt=Q("FileEditIcon",[["path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5",key:"1bg6eb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z",key:"1rgxu8"}]]),st=Q("PieChartIcon",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),at=Q("XCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"15",y1:"9",x2:"9",y2:"15",key:"19zs77"}],["line",{x1:"9",y1:"9",x2:"15",y2:"15",key:"10u9bu"}]]);var Ce=60,Oe=Ce*60,Ie=Oe*24,it=Ie*7,P=1e3,ce=Ce*P,xe=Oe*P,ot=Ie*P,lt=it*P,ye="millisecond",W="second",V="minute",B="hour",U="day",te="week",A="month",Ee="quarter",F="year",J="date",ut="YYYY-MM-DDTHH:mm:ssZ",Me="Invalid Date",ct=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,dt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;const vt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var n=["th","st","nd","rd"],r=t%100;return"["+t+(n[(r-20)%10]||n[r]||n[0])+"]"}};var fe=function(t,n,r){var e=String(t);return!e||e.length>=n?t:""+Array(n+1-e.length).join(r)+t},ht=function(t){var n=-t.utcOffset(),r=Math.abs(n),e=Math.floor(r/60),s=r%60;return(n<=0?"+":"-")+fe(e,2,"0")+":"+fe(s,2,"0")},ft=function a(t,n){if(t.date()<n.date())return-a(n,t);var r=(n.year()-t.year())*12+(n.month()-t.month()),e=t.clone().add(r,A),s=n-e<0,i=t.clone().add(r+(s?-1:1),A);return+(-(r+(n-e)/(s?e-i:i-e))||0)},mt=function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},yt=function(t){var n={M:A,y:F,w:te,d:U,D:J,h:B,m:V,s:W,ms:ye,Q:Ee};return n[t]||String(t||"").toLowerCase().replace(/s$/,"")},pt=function(t){return t===void 0};const gt={s:fe,z:ht,m:ft,a:mt,p:yt,u:pt};var K="en",j={};j[K]=vt;var Ae="$isDayjsObject",pe=function(t){return t instanceof se||!!(t&&t[Ae])},re=function a(t,n,r){var e;if(!t)return K;if(typeof t=="string"){var s=t.toLowerCase();j[s]&&(e=s),n&&(j[s]=n,e=s);var i=t.split("-");if(!e&&i.length>1)return a(i[0])}else{var l=t.name;j[l]=t,e=l}return!r&&e&&(K=e),e||!r&&K},_=function(t,n){if(pe(t))return t.clone();var r=typeof n=="object"?n:{};return r.date=t,r.args=arguments,new se(r)},_t=function(t,n){return _(t,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})},h=gt;h.l=re;h.i=pe;h.w=_t;var $t=function(t){var n=t.date,r=t.utc;if(n===null)return new Date(NaN);if(h.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var e=n.match(ct);if(e){var s=e[2]-1||0,i=(e[7]||"0").substring(0,3);return r?new Date(Date.UTC(e[1],s,e[3]||1,e[4]||0,e[5]||0,e[6]||0,i)):new Date(e[1],s,e[3]||1,e[4]||0,e[5]||0,e[6]||0,i)}}return new Date(n)},se=function(){function a(n){this.$L=re(n.locale,null,!0),this.parse(n),this.$x=this.$x||n.x||{},this[Ae]=!0}var t=a.prototype;return t.parse=function(r){this.$d=$t(r),this.init()},t.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},t.$utils=function(){return h},t.isValid=function(){return this.$d.toString()!==Me},t.isSame=function(r,e){var s=_(r);return this.startOf(e)<=s&&s<=this.endOf(e)},t.isAfter=function(r,e){return _(r)<this.startOf(e)},t.isBefore=function(r,e){return this.endOf(e)<_(r)},t.$g=function(r,e,s){return h.u(r)?this[e]:this.set(s,r)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(r,e){var s=this,i=h.u(e)?!0:e,l=h.p(r),m=function($,S){var p=h.w(s.$u?Date.UTC(s.$y,S,$):new Date(s.$y,S,$),s);return i?p:p.endOf(U)},v=function($,S){var p=[0,0,0,0],k=[23,59,59,999];return h.w(s.toDate()[$].apply(s.toDate("s"),(i?p:k).slice(S)),s)},f=this.$W,d=this.$M,c=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case F:return i?m(1,0):m(31,11);case A:return i?m(1,d):m(0,d+1);case te:{var O=this.$locale().weekStart||0,I=(f<O?f+7:f)-O;return m(i?c-I:c+(6-I),d)}case U:case J:return v(y+"Hours",0);case B:return v(y+"Minutes",1);case V:return v(y+"Seconds",2);case W:return v(y+"Milliseconds",3);default:return this.clone()}},t.endOf=function(r){return this.startOf(r,!1)},t.$set=function(r,e){var s,i=h.p(r),l="set"+(this.$u?"UTC":""),m=(s={},s[U]=l+"Date",s[J]=l+"Date",s[A]=l+"Month",s[F]=l+"FullYear",s[B]=l+"Hours",s[V]=l+"Minutes",s[W]=l+"Seconds",s[ye]=l+"Milliseconds",s)[i],v=i===U?this.$D+(e-this.$W):e;if(i===A||i===F){var f=this.clone().set(J,1);f.$d[m](v),f.init(),this.$d=f.set(J,Math.min(this.$D,f.daysInMonth())).$d}else m&&this.$d[m](v);return this.init(),this},t.set=function(r,e){return this.clone().$set(r,e)},t.get=function(r){return this[h.p(r)]()},t.add=function(r,e){var s=this,i;r=Number(r);var l=h.p(e),m=function(c){var y=_(s);return h.w(y.date(y.date()+Math.round(c*r)),s)};if(l===A)return this.set(A,this.$M+r);if(l===F)return this.set(F,this.$y+r);if(l===U)return m(1);if(l===te)return m(7);var v=(i={},i[V]=ce,i[B]=xe,i[W]=P,i)[l]||1,f=this.$d.getTime()+r*v;return h.w(f,this)},t.subtract=function(r,e){return this.add(r*-1,e)},t.format=function(r){var e=this,s=this.$locale();if(!this.isValid())return s.invalidDate||Me;var i=r||ut,l=h.z(this),m=this.$H,v=this.$m,f=this.$M,d=s.weekdays,c=s.months,y=s.meridiem,O=function(p,k,N,L){return p&&(p[k]||p(e,i))||N[k].slice(0,L)},I=function(p){return h.s(m%12||12,p,"0")},w=y||function(S,p,k){var N=S<12?"AM":"PM";return k?N.toLowerCase():N},$=function(p){switch(p){case"YY":return String(e.$y).slice(-2);case"YYYY":return h.s(e.$y,4,"0");case"M":return f+1;case"MM":return h.s(f+1,2,"0");case"MMM":return O(s.monthsShort,f,c,3);case"MMMM":return O(c,f);case"D":return e.$D;case"DD":return h.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return O(s.weekdaysMin,e.$W,d,2);case"ddd":return O(s.weekdaysShort,e.$W,d,3);case"dddd":return d[e.$W];case"H":return String(m);case"HH":return h.s(m,2,"0");case"h":return I(1);case"hh":return I(2);case"a":return w(m,v,!0);case"A":return w(m,v,!1);case"m":return String(v);case"mm":return h.s(v,2,"0");case"s":return String(e.$s);case"ss":return h.s(e.$s,2,"0");case"SSS":return h.s(e.$ms,3,"0");case"Z":return l}return null};return i.replace(dt,function(S,p){return p||$(S)||l.replace(":","")})},t.utcOffset=function(){return-Math.round(this.$d.getTimezoneOffset()/15)*15},t.diff=function(r,e,s){var i=this,l=h.p(e),m=_(r),v=(m.utcOffset()-this.utcOffset())*ce,f=this-m,d=function(){return h.m(i,m)},c;switch(l){case F:c=d()/12;break;case A:c=d();break;case Ee:c=d()/3;break;case te:c=(f-v)/lt;break;case U:c=(f-v)/ot;break;case B:c=f/xe;break;case V:c=f/ce;break;case W:c=f/P;break;default:c=f;break}return s?c:h.a(c)},t.daysInMonth=function(){return this.endOf(A).$D},t.$locale=function(){return j[this.$L]},t.locale=function(r,e){if(!r)return this.$L;var s=this.clone(),i=re(r,e,!0);return i&&(s.$L=i),s},t.clone=function(){return h.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},a}(),ze=se.prototype;_.prototype=ze;[["$ms",ye],["$s",W],["$m",V],["$H",B],["$W",U],["$M",A],["$y",F],["$D",J]].forEach(function(a){ze[a[1]]=function(t){return this.$g(t,a[0],a[1])}});_.extend=function(a,t){return a.$i||(a(t,se,_),a.$i=!0),_};_.locale=re;_.isDayjs=pe;_.unix=function(a){return _(a*1e3)};_.en=j[K];_.Ls=j;_.p={};const St={border:"rounded",top:"12",left:"-5",w:"50","max-h":"55",overflow:"y-scroll",text:"white",bg:"zinc-900",class:"absolute selector-options"},kt=["onClick"],xt=["justify"],Mt=["onClick"],de=me({__name:"Selector",props:{isMultiple:{type:Boolean,default:!1},options:{},selectedOption:{},tree:{type:Boolean,default:!1}},emits:["select"],setup(a,{emit:t}){De(()=>{document.addEventListener("click",f,!0)}),be(()=>document.removeEventListener("click",f));const n=a,r=t,e=M(!1),s=M({}),i=D(()=>{var y;const{selectedOption:d}=n,c=d.value;return(y=d.children)!=null&&y.length?`${c} ${d.children[d.selectedChildIndex||0].value}`:c}),l=d=>{var c;n.tree&&((c=d.children)!=null&&c.length)?s.value=Ke(s.value)?d:{}:(v(),r("select",d))},m=(d,c)=>{v(),r("select",{...d,selectedChildIndex:c})},v=()=>{e.value=!e.value},f=()=>{e.value&&(e.value=!1)};return(d,c)=>(b(),z("div",{text:"green-400",border:"b-1 b-zinc-500 rounded",bg:"zinc-900",mx:"2",py:"2",w:"40",class:"cursor-pointer relative",onClick:v},[T(C(i.value)+" ",1),we(u("ul",St,[(b(!0),z(G,null,ve(d.options,y=>{var O,I;return b(),z("li",{py:"2",mx:"2","hover:text":"green-400",class:he([y.key===n.selectedOption.key?"text-green-400":"","relative"]),key:y.key,onClick:w=>l(y)},[u("p",{class:"flex",items:"center",justify:d.tree&&((O=y.children)!=null&&O.length)?"between":"center"},[T(C(y.value)+" ",1),d.tree&&((I=y.children)!=null&&I.length)?(b(),ne(H(Ge),{key:0,class:"transform",size:18,rotate:s.value.key===y.key?90:0},null,8,["rotate"])):Z("",!0)],8,xt),d.tree&&s.value.key===y.key?(b(!0),z(G,{key:0},ve(s.value.children||[],(w,$)=>(b(),z("p",{key:w.key,pt:"2",text:"sm white left","hover:text":"green-400",onClick:S=>m(y,$)},C(w.value),9,Mt))),128)):Z("",!0)],10,kt)}),128))],512),[[Ye,e.value]])]))}}),Dt=a=>(Be("data-v-2578c269"),a=a(),Je(),a),bt={key:0,class:"fixed",w:"full",h:"full",bg:"gray-900/80"},wt={border:"rounded-lg",bg:"zinc-800",p:"4","min-w":"100",top:"1/2",left:"1/2",class:"absolute transform -translate-y-1/2 -translate-x-1/2"},Ct={text:"center white",class:"flex",items:"center",justify:"between"},Ot={text:"xl"},It={text:"sm",ml:"2"},Et={text:"green-400 center",mt:"4"},At=Dt(()=>u("p",{text:"sm gray-500",mt:"1"},"你做的很棒！ 再接再励哟~",-1)),zt={bg:"zinc-900",border:"rounded",mt:"8",mb:"2",text:"white middle"},Nt={class:"flex",justify:"start",items:"center",p:"4"},Tt={ml:"2",text:"green-400 right",flex:"grow shrink basis-full"},Lt={class:"flex",justify:"start",items:"center",p:"4"},Ut={ml:"2",text:"green-400 right",flex:"grow shrink basis-full"},Ft={bg:"zinc-900",border:"rounded",mb:"8",text:"white middle"},Ht={class:"flex",justify:"start",items:"center",p:"4"},Yt={ml:"2",text:"green-400 right",flex:"grow shrink basis-full"},jt=me({__name:"Modal",props:{count:Number,rightRate:String,time:String,visible:Boolean},emits:["update:visible"],setup(a,{emit:t}){const n=t,r=D(()=>We().format("MM/DD")),e=D(()=>Ve[new Date().getDay()]),s=()=>{n("update:visible")};return(i,l)=>(b(),ne(Re,null,{default:je(()=>[a.visible?(b(),z("div",bt,[u("div",wt,[u("div",Ct,[u("p",null,[u("ruby",Ot,[T(C(e.value.text),1),u("rt",null,C(e.value.kana),1)]),u("span",It,C(r.value),1)]),Y(H(at),{cursor:"pointer",onClick:s})]),u("div",Et,[Y(H(rt),{size:45}),At]),u("div",zt,[u("p",Nt,[Y(H(nt),{size:18}),T(" 完成单词数 "),u("span",Tt,C(a.count),1)]),u("p",Lt,[Y(H(st),{size:18}),T(" 正确率 "),u("span",Ut,C(a.rightRate)+"%",1)])]),u("div",Ft,[u("p",Ht,[Y(H(tt),{size:18}),T(" 总耗时 "),u("span",Yt,C(a.time),1)])]),u("p",{w:"100%",text:"zinc-400 center",border:"b-1 b-zinc-500 rounded",bg:"zinc-700",p:"2",cursor:"pointer",hover:"bg-green-400 text-white",onClick:s}," 继续卷 ")])])):Z("",!0)]),_:1}))}});const Rt=Ze(jt,[["__scopeId","data-v-2578c269"]]),Wt={key:0,text:"center white"},Vt={class:"flex-center"},Bt={text:"white"},Jt={w:"40",mb:"1",position:"relative",class:"p_progress"},Zt={text:"center"},Pt={text:"green-400"},qt=u("span",{mx:"1"},"/",-1),Xt={class:"flex-center",flex:"col"},Gt={text:"white center 2xl"},Kt=["placeholder"],Qt={flex:"center",text:"md zinc-400 center",select:"none"},en=u("span",{text:"green-400 xs",border:"b-1 b-zinc-500 rounded-sm",mx:"2",bg:"zinc-700",p:"1"},"ENTER",-1),rn=me({__name:"Tango",setup(a){const t=Qe();De(()=>{document.addEventListener("keydown",_e)}),be(()=>{document.removeEventListener("keydown",_e)});const n=D(()=>v.value?{width:"100%"}:{width:`${(k.value/$.value.key*100).toFixed(2)}%`}),r=D(()=>{var o,g,x;return S.value.key==="all"?Object.entries(qe).reduce((E,[,He])=>[...E,...He.words],[]):((x=(((o=p.value)==null?void 0:o.children)||[])[((g=p.value)==null?void 0:g.selectedChildIndex)||0])==null?void 0:x.words)||[]}),e=D(()=>Xe.map(o=>({key:o,value:`随机的${o}个单词`}))),s=D(()=>et(S.value)),i=D(()=>v.value?ae.value:N.value[k.value-1]),l=D(()=>{const o=r.value[i.value];return{...o,degree:oe.value[o.kana]||0}}),m=D(()=>({width:`${l.value.kana.length*1.25+2}rem`})),v=D(()=>$.value.key==="∞"),f=D(()=>v.value||k.value<N.value.length),d=D(()=>{const{kana:o,text:g}=l.value,x=[o,g],E=L.value[k.value-1];return!!E&&x.includes(E)}),c=D(()=>L.value.length),y=D(()=>{const o=Array.from(X.value.values());return c.value?(o.filter(g=>g>0).length/c.value*100).toFixed(2):"0.00"}),O=D(()=>{const g=["hour","minute","second"].map(x=>_().diff(I.value,x)).join(":");return _(`${_().format("YYYY-MM-DD")} ${g}`).format("HH小时mm分ss秒")}),I=M(_()),w=M(!1),$=M(e.value[0]),S=M(t[0]),p=M({}),k=M(1),N=M([]),L=M([]),ge=M(null),ae=M(0),ie=M(!1),q=M(0),X=M(new Map),oe=M({}),R=M(!1);ee(w,o=>{if(o)if(Ne(),v.value)N.value=[],ae.value=ue();else{let g=$.value.key;const x=[];for(;g>0;){const E=ue();($.value.key>r.value.length||!x.includes(E))&&(x.push(E),g--)}N.value=x}else v.value&&(Se(),R.value=!!c.value)}),ee(R,o=>{o||(le(),Fe())}),ee(()=>S.value.key,o=>{o!=="all"&&(p.value={...s.value[0],selectedChildIndex:0}),$.value=e.value[0]}),ee([p.value.key,p.value.selectedChildIndex],()=>{$.value=e.value[0]});const Ne=()=>{oe.value=JSON.parse(localStorage.getItem("degree_records")||"{}")},_e=o=>{o&&o.keyCode===13&&$e()},Te=o=>{S.value=o},Le=o=>{p.value=o},Ue=o=>{$.value=o},le=()=>{w.value=!w.value},ue=()=>Math.ceil(Math.random()*(r.value.length-1)),$e=()=>{var o;if(w.value){if(!d.value){ie.value=!0;const g=setTimeout(()=>{ie.value=!1,clearTimeout(g)},300);q.value+=1;return}X.value.set(l.value.kana,(X.value.get(l.value.kana)||0)+(q.value?-1:1)),v.value?(k.value+=1,ae.value=ue()):k.value<$.value.key?k.value+=1:(Se(),R.value=!0),(o=ge.value)==null||o.focus(),q.value=0}},Se=()=>{const o={...oe.value};Array.from(X.value.entries()).forEach(([g,x])=>{g in o||(o[g]=0);const E=o[g]+x;o[g]=E<0?0:E>3?3:E}),localStorage.setItem("degree_records",JSON.stringify(o))},Fe=()=>{k.value=1,N.value=[],L.value=[],q.value=0,X.value.clear(),I.value=_(),$.value=e.value[0]};return(o,g)=>(b(),z(G,null,[w.value?(b(),z(G,{key:1},[u("div",Bt,[u("div",Jt,[u("div",{bg:"green-400",h:"2",position:"absolute",top:"-0.5",left:"0",border:"rounded",style:ke(n.value)},null,4)]),u("p",Zt,[u("span",Pt,C(k.value),1),qt,u("span",null,C($.value.key),1)])]),u("div",Xt,[u("p",Gt,C(l.value.zh),1),we(u("input",{type:"text",autofocus:"",ref_key:"input",ref:ge,class:he(["signle-inputbox",[L.value[k.value-1]?`text_${d.value?"right":"error"}`:"",ie.value?"shake":""]]),my:"4","min-w":"18","onUpdate:modelValue":g[0]||(g[0]=x=>L.value[k.value-1]=x),placeholder:q.value>=3?l.value.kana:"",style:ke(m.value)},null,14,Kt),[[Pe,L.value[k.value-1]]]),u("p",Qt,[T(" 音型: "+C(l.value.tone)+" | 词性: "+C(l.value.kind)+" | 熟练度: ",1),(b(),z(G,null,ve(3,x=>u("span",{h:"1",w:"4",border:"rounded",ml:"1",class:he(["inline-block",x>(l.value.degree||0)?"bg-gray-500":"bg-green-400"]),key:x},null,2)),64))]),f.value?(b(),z("div",{key:0,mt:"4",text:"xs gray-500",class:"cursor-pointer",onClick:$e},[T(" 按下"),en,T("键切换下一个 ")])):Z("",!0)]),u("p",{w:"26",text:"zinc-400 center",border:"b-1 b-zinc-500 rounded",mt:"12",mx:"auto",bg:"zinc-700",p:"1",cursor:"pointer",hover:"bg-green-400 text-white",onClick:le}," 返回 ")],64)):(b(),z("div",Wt,[u("div",Vt,[T(" 请选择练习范围： "),Y(de,{onSelect:Te,options:H(t),"selected-option":S.value},null,8,["options","selected-option"]),S.value.key!=="all"?(b(),ne(de,{key:0,onSelect:Le,options:s.value,"selected-option":p.value,tree:""},null,8,["options","selected-option"])):Z("",!0),Y(de,{onSelect:Ue,options:e.value,"selected-option":$.value},null,8,["options","selected-option"])]),u("p",{w:"26",text:"zinc-400",border:"b-1 b-zinc-500 rounded",mt:"12",mx:"auto",bg:"zinc-700",p:"1",cursor:"pointer",hover:"bg-green-400 text-white",onClick:le}," 卷起来 👻 ")])),R.value?(b(),ne(Rt,{key:2,count:c.value,"right-rate":y.value,time:O.value,visible:R.value,"onUpdate:visible":g[1]||(g[1]=x=>R.value=x)},null,8,["count","right-rate","time","visible"])):Z("",!0)],64))}});export{rn as default};
