import{c as G,d as se,s as ne,x as V,j as oe,h as o,y as re,D as le,A as ue,m as ce,z as ie,k as n,B as ve,a as p,b as s,E as de,t as u,e as _,f as S,u as I,w as P,G as H,p as J,g as h,F as pe,o as m,P as $}from"./index-820047a8.js";import{i as me,C as he}from"./index-3ffc7b84.js";const fe=G("ArrowRightIcon",[["line",{x1:"5",y1:"12",x2:"19",y2:"12",key:"1smlys"}],["polyline",{points:"12 5 19 12 12 19",key:"sfr3i6"}]]),xe=G("ChevronLeftIcon",[["polyline",{points:"15 18 9 12 15 6",key:"kvxz59"}]]),ye={key:0,class:"text-white"},ge={w:"40",mb:"1",position:"relative",class:"p_progress"},_e={text:"center"},we={text:"green-400"},ke=s("span",{mx:"1"},"/",-1),be={class:"flex-center",flex:"col"},De={class:"text-white text-4xl"},Ae={class:"my-4 flex-center"},Te={key:0,class:"switch-btn hover:text-green-400 hover:-translate-x-1"},Ie={class:"w-18"},Ce=["placeholder"],Ne={text:"xs zinc-400 center",select:"none"},ze={key:1,class:"w-18 ml-4"},Le=["placeholder"],Re={text:"xs zinc-400 center",select:"none"},Ee={text:"white",select:"none"},Ve=s("p",{text:"zinc-500 xs",mt:"2",mb:"6"},[h(" Tips: 可通过按下键盘的 "),s("span",{border:"rounded",p:"1",bg:"zinc-900",text:"xs green-400"},"Enter"),h(" 键切换下一个；点击上述内容中的 "),s("strong",{text:"green-400"},"绿色字体"),h(" 可以切换练习模式哦~ ")],-1),Se=s("span",{text:"zinc-400 xs",border:"b-1 b-zinc-500 rounded-sm",mb:"2",bg:"zinc-700",p:"1"},"ENTER",-1),$e={class:"flex-center",text:"xl white center",hover:"text-green-400",select:"none"},Ke=se({__name:"PlaygroundView",setup(Me){ne(()=>{l.value||(c.value=E(x.length)),document.addEventListener("keydown",U);const e=localStorage.getItem("kanaRecord");if(e){const{time:a="",data:t={}}=JSON.parse(e);r.recordData={time:V().format("YYYY-MM-DD HH:mm:ss"),data:V().isAfter(V(a),"day")?{}:t}}}),oe(()=>{document.removeEventListener("keydown",U),localStorage.setItem("kanaRecord",JSON.stringify(r.recordData))});const f=o(0),x=[...re,...le,...ue,...ce].filter(e=>!me(e)),c=o(0),i=o(""),C=o(null),v=o(""),Q=o(null),N=o(!1),z=o(!1),w=o(0),k=o(0),y=o(0),b=o(0),W=o("havefun"),r=ie({recordData:{}}),X=n(()=>{if(f.value){const e=new Map;let a=0;for(;a<f.value;){const t=E(f.value);e.has(t)||(e.set(t,t),a++)}return Array.from(new Set(e)).map(t=>x[t[0]])}return[]}),Z=n(()=>({width:`${(c.value+1)/f.value*100}%`})),l=n(()=>W.value!=="havefun"),ee=n(()=>l.value?X.value:x),d=n(()=>ee.value[c.value]),M=n(()=>A.value.type.includes("/")),D=n(()=>Y(i.value)),L=n(()=>Y(v.value,1)),g=n(()=>M.value?D.value&&L.value:D.value),B=n(()=>{const e=$.filter((a,t)=>t!==y.value);return[...e,{type:`${e[0].type}/${e[1].type}`,name:`${e[0].name}/${e[1].name}`}]}),te=n(()=>{const e=d.value[$[y.value].type]||"";return Array.isArray(e)?e.join("/"):e}),A=n(()=>B.value[b.value]),q=n(()=>M.value),K=n(()=>e=>A.value.name.split("/")[e]),O=n(()=>A.value.type.split("/").map((e,a)=>{const t=d.value[e];return!a&&w.value>=3||a&&k.value>=3?Array.isArray(t)?t[0]:t:""}));ve([y,b],()=>{i.value=v.value=""});const R=()=>{if(ae(),g.value)i.value=v.value="",w.value=k.value=0,C.value&&C.value.focus(),c.value=l.value?c.value+1:E(x.length);else{N.value=!D.value,z.value=!L.value,w.value+=1,q.value&&(k.value+=1);const e=setTimeout(()=>{N.value=z.value=!1,clearTimeout(e)},300)}},ae=()=>{const e=d.value.lowerCase||"";r.recordData.data||(r.recordData.data={}),Object.keys(r.recordData.data).includes(e)?r.recordData.data[e]={...d.value,rightTimes:r.recordData.data[e].rightTimes+Number(g.value),errorTimes:r.recordData.data[e].errorTimes+ +!g.value}:r.recordData.data[e]={...d.value,rightTimes:Number(g.value),errorTimes:+!g.value}},E=e=>Math.ceil(Math.random()*(e===x.length?e-1:e)),U=e=>{e&&e.keyCode===13&&R()},j=e=>{const a=e==="question"?y:b;a.value=a.value>1?0:a.value+1,w.value=k.value=0},Y=(e,a=0)=>{let t=e||"";const F=A.value.type.split("/")[a],T=d.value[F];return F==="roma"?(t=t.toLowerCase(),typeof T=="string"?t===T:(T||[]).includes(t)):T===t};return(e,a)=>(m(),p(pe,null,[l.value?(m(),p("div",ye,[s("div",ge,[s("div",{bg:"green-400",h:"2",position:"absolute",top:"-0.5",left:"0",border:"rounded",style:de(Z.value)},null,4)]),s("p",_e,[s("span",we,u(c.value+1),1),ke,s("span",null,u(f.value),1)])])):_("",!0),s("div",be,[s("p",De,u(te.value),1),s("div",Ae,[l.value?(m(),p("div",Te,[S(I(xe),{size:40})])):_("",!0),s("div",Ie,[P(s("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>i.value=t),maxlength:"3",type:"text",autofocus:"",ref_key:"firstAnswerInput",ref:C,placeholder:O.value[0],class:J(["signle-inputbox",i.value?`text_${D.value?"right":"error"}`:"",N.value?"shake":""])},null,10,Ce),[[H,i.value]]),s("p",Ne,u(K.value(0)),1)]),q.value?(m(),p("div",ze,[P(s("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>v.value=t),maxlength:"3",type:"text",ref_key:"secondAnswerInput",ref:Q,placeholder:O.value[1],class:J(["signle-inputbox",v.value?`text_${L.value?"right":"error"}`:"",z.value?"shake":""])},null,10,Le),[[H,v.value]]),s("p",Re,u(K.value(1)),1)])):_("",!0),l.value?(m(),p("div",{key:2,class:"switch-btn hover:text-green-400 hover:translate-x-1",onClick:R},[S(I(he),{size:40})])):_("",!0)]),s("p",Ee,[h(" 请写出如题所示 "),s("strong",{text:"green-400",cursor:"pointer",onClick:a[2]||(a[2]=t=>j("question"))},u(I($)[y.value].name),1),h(" 相对应的 "),s("strong",{text:"green-400",cursor:"pointer",onClick:a[3]||(a[3]=t=>j("answer"))},u(B.value[b.value].name),1)]),Ve,l.value?_("",!0):(m(),p("div",{key:0,class:"flex-center flex-col cursor-pointer",onClick:R},[Se,s("p",$e,[h(" 下一个 "),S(I(fe),{class:"ml-2"})])]))])],64))}});export{Ke as default};
